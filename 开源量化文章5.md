## 文章：高频交易都有哪些著名的算法？

数字货币高频量化策略开源——我如何识别韭菜，又为何放弃这条路。



今后的更新都会添加到专栏，欢迎深入阅读。本系列文章将在Github、mirror(去中心化发布平台)等数个平台同步发布。

我的目标是让更多有识之士看清混乱的本质，并尝试推动市场结构的透明化。真相理解起来不是很简单，但是认真阅读能有大收获。

感谢 ChatGPT，在我最初动摇时，它鼓励我将思考变为记录，将策略变为行动。



我决定开源我迄今为止构建的数字货币高频量化交易策略。虽花费了我大量时间构建，但随着我对市场机制与金融伦理的深入思考，我选择不再继续这条道路。接下来，我将陆续公开策略代码、建模思想与验证过程，供有志者学习、检视与质疑。原因有三：

透明认知：经过实践与回测，我发现这些策略虽建立在复杂的分析与高频数据处理之上，但在真实市场中的表现不如预期。我意识到这些方法在信息结构的顶层早已趋于公开，或成为大型机构内的“共识性秘密”。对个人而言，它们并非通向财富的捷径。同时，人工智能的发展也迟早将这些信息差抹平。
分享探索与展示能力：我在构建这套策略过程中，投入了一些时间精力，也体现了我的建模能力、代码实现力和对市场结构的深入理解。所有核心因子均为独立思考所得，核心思想在三年前就有雏形，但当时缺乏辅助工具与验证手段，且因我当时不知道还有人能监控微信聊天而泄露，如今借助 ChatGPT 和代码能力，我才真正将其系统化实现。同时，早期我曾通过高风险实践验证部分市场猜想，虽有亏损，却加深了理解。公开这段历程，一方面是对自己探索的记录，另一方面也希望借此寻找合作者，或吸引潜在雇主关注。
价值观驱动：高频量化交易本质上是一种“微观套利”行为，通常建立在散户信息劣势之上。我逐渐意识到，这与我追求的长期价值投资理念存在根本冲突。我希望用这次公开行为，引发对金融效率与公平的更多讨论，哪怕微不足道，也愿作为一点改变的火种。我计划将全部策略代码和思考记录开源，并同步发布至多个平台，供有兴趣者学习、借鉴或完善。
我的放弃并非源于策略失败，而是源于它的成功基于他人的失败。这是我难以接受的根本逻辑。市场的效率若建立在信息不对称和系统性博弈之上，那就值得被重新审视。高频交易违背了我对公平交易的理解。如果一个市场只鼓励算法碾压，而不是基本面研究，那这不是“有效”，而是“失衡”。

事实上，我们都知道——在赌场里是几乎不可能赚钱的。唯一可能赚钱的方式，就是存在一个比你更大的“韭菜”，与其反向操作，但是赌场也完全可以先割“高手玩家”，然后其他韭菜“先养肥”。市场机制中如果激励错误，那聪明人也终将沦为被猎杀的目标。

事实上，做市商拥有绝大多数散户不知道的信息：如某个订单流的订单，下单的交易者是否是API下单的字段。甚至可能存在做市商能够直接获取交易者的杠杆、止损位置等信息，因此高频交易虽然依靠技术，但其实盈利的本质还是来自于不公平竞争。

总的而言，市场上曾存在一个强大的因子，少数拥有深度思考能力并往此方向思考过的人能够想到，但是可能这个时代该因子已经几乎失效。可能存在其他我不知道的因子，但是无论如何市场的游戏规则需要改变。我希望能以此为起点，引发更多对市场公平、交易结构、金融伦理的探讨。

该策略的启发来自于我个人在加密市场上的赌博，首先我们确认一个问题：赌徒在加密货币市场使用高倍杠杆后，上涨和下跌的最终概率会因为赌徒的开仓而变化吗？有人认为不会变化，大部分的赌徒只是因为手续费的磨损，以及大数定律的最终归零而亏损的。实则不然，即使赌场不来狙击你的仓位（比如赌徒杠杆做多，狙击你的仓位的意思就是反向做空，打压你的仓位，等你被迫爆仓卖出以后再以低价买回来把赌徒的钱赚走），通过市场结构的微观信息，高频量化交易者依旧能探测到赌徒的仓位。

在A股大概也存在类似的策略，也就是探测经常止损的“意志不坚定”反复买入卖出尤其反复止损的玩家的订单，然后反向进行做空操作。虽然是聪明人赚了韭菜的钱，但是这样的操作逻辑完全与价值投资的理念相悖。

为了说明这个策略的思路究竟有多清晰，我现在直接公开它的具体实现方式：

1、 实时获取交易所某标的物（如BTC、ETH、DOGE）的订单流数据（即实时的所有的成交订单金额与价格），并存储。

2、 根据获取的订单流数据，找到相同数额且开仓方向相反的平仓单（比如检测到一个单子做多0.345个比特币，在不长的时间后检测到另一个做空0.345个比特币的单子，这大概率就是一个平仓单）。

3、 根据开仓与平仓价格，计算用户的手续费与亏损，预估下一次用户的开仓数量与价格。

4、 在不长的时间内检测到符合的开仓数量与价格，反向割韭菜。

但是这里还是存在诸多问题的：

1、如何具体计算开仓数额？

2、我不知道交易者的原始杠杆，如何预估他的本金？

3、韭菜不一定全仓交易

4、做市商完全可以自己和自己交易，使用“虚假订单”。

我把这个重要的因子公布的另一大原因是因为我认为该策略应该是赚不了钱了，即使能赚，我也不想赚这个钱。我希望这个世界更加美好，而不是大量聪明人把心思浪费在如何“割韭菜”上。

对于第一个问题，我一开始的思路是拟合一个开仓公式，也就是如何找到一个公式，精确根据余额计算出玩家的开仓结果，或者根据开仓结果估计玩家的余额。但是后来一拍脑袋发现，我不需要完全拟合全部的可能的开仓数额，我只需要抓住我能够发现的韭菜就行了，也就是错过机会没关系，把确定性高的机会抓住就行。

对于第二个问题，我需要遍历所有可能的杠杆，因为只要最终结果精确相符，就一定可以检测到韭菜。

对于第三个问题，我们假设韭菜全仓交易，虽然可能过拟合，只要存在概率上的优势，就是好因子。

对于第四个问题，我假设做市商是随机投放部分虚假自成交订单，那么我需要用其他的因子筛选出更多韭菜出现的可能的情况，如连续趋势、大波动、支撑位与压力位等，来提高我的综合胜率，这样我筛选出来的订单大概率就是韭菜订单而不是做市商自己成交的“虚假订单”。

尽管策略可能仍有未尽之处，但我倾向于认为它已被主流做市商所针对，而非仍藏有尚未开发的巨大价值。可能做市商已经进行了大量干扰性自成交行为，他们已经针对已知策略进行了针对性对策的制定，因此我放弃优化我的策略转向开源：既坚持了公平正义的初衷，又能展现自己的能力。

https://github.com/matphy12/The-truth-about-high-frequency-trading
github.com/matphy12/The-truth-about-high-frequency-trading
---------------------------------------------------------分割线--------------------------------------------------------------

在我的量化策略中，核心是对“开仓公式”的识别与建模。下面简要介绍：

所谓开仓公式，简而言之就是：
给定账户余额 Balance，标记价格 Price_mark，最新成交价 Price_latest，杠杆倍数 Leverage，假设全仓买入——我能具体开多少数量的合约？
这是每个交易者在下单前都被动回答的问题，但很少有人去主动研究它的机制。

这个公式的反问题同样重要：
如果我观察到某人在某一时刻以某个数额建仓，能否反推其账户的初始本金范围？遍历所有可能杠杆，是否能锁定他的资金规模？

这两个问题，99.999% 的交易者从未思考过。为了解答它们，我进行了大量截图与录屏，对比交易所“开仓前预估数量”与“实际成交数量”，并记录下相关参数。在不断实验中，我发现，在多数情况下，标记价格、最新价格、杠杆、余额这四个变量基本决定了开仓后的实际成交数量。也就是说：交易页面显示的“预估开仓量”往往就是实际成交结果。但也并非完全一致。在一些场景下，公式预测与真实结果存在偏差。

起初，我陷入了“死脑筋”——我执念于必须构建一个 100% 准确的开仓公式，哪怕要借助神经网络来拟合。我为此停滞了数月。直到某一天，我灵光一闪：我并不需要识别所有人的仓位，只需要识别出我能确认的韭菜就足够了。错过大部分机会没关系，只要能抓住那些确定性高的交易，策略依旧成立。

因此我可以直接使用交易所公开的公式：这在大型数字货币交易所官方是公开披露的。

具体而言，对于做空，在本文开始发布日期适用的公式为：


由于开仓量是随着余额单调递增的，我们可以作图：

我们假设括号内部 
 的计算结果是Quality:Q*，那么取整后的结果就是Q,也就是说余额为Balance2的时候开仓数量是int(Q*)=Q（为方便起见，这里展示开仓数额是整数的情况）.显然地，可以看出余额为[Balance3,Balance1)的时候，实际开仓数额也是Q，据此，我们可以根据实际开仓金额Q与Q+1对应的Balance区间来估算交易者的余额。


做多的公式较为复杂，需要用到标记价格。

具体建模、数学推导细节与代码实现，我将在后续文章中逐步更新，欢迎关注。

金融市场并非全然理性，它既是数字与算法的竞技场，也承载着无数普通人的梦想与命运。我的策略虽然可能成功赚钱，但我在深思熟虑后选择放弃。愿这次开源不仅是一段技术旅程的终点，也是一场金融伦理反思的起点。

编辑于 2025-06-01 05:19・新加坡